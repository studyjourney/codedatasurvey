<!DOCTYPE html>
<html lang="en">

<head>
    <title>Code Data Survey</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
    <link href="fa/css/all.css" rel="stylesheet">
    <script src="js/jquery-3.5.1.min.js"></script>
    <script src="js/bootstrap.bundle.min.js"></script>
    <!-- Favicons -->


    <!-- Custom styles for this template -->
    <link href="css/main.css" rel="stylesheet">
</head>

<body>

    <div class="bgimg-1">
        <div class="caption">
            <span class="border">Code Data Survey</span>
        </div>
    </div>

    <div style="color: #777;background-color:white;text-align:center;padding:50px 80px;text-align: justify;">
        <h2 style="text-align:center;">Help Us!</h2>
        <p>The Study Journey Project wants to help you passing code modules easier. The first step of our project is to gain more knowledge on the current situation. This will help us to provide resources and methods more meaningful for everyone</p>
        <span class=fa-browser" title="icon name" aria-hidden="true"></span>
        <div class="container pt-4">
            <div class="row d-flex justify-content-around">
                <div class="col-sm text-center">
                    <div class="row justify-content-center">
                        <i class="fas fa-glasses" style="font-size: 5rem;"></i>
                    </div>
                    <h3 class="text-muted pt-2">Insights</h3>
                    <p>Our goal is to gain valueable insights on how code students pass their assessments and how passing or failing is connected to attended Learning Units.</p>
                </div>
                <div class="col-sm text-center">
                    <div class="row justify-content-center">
                        <span class="fas fa-user-shield" style="font-size: 5rem;"></span>
                    </div>
                    <h3 class="text-muted pt-2">Anonymous</h3>
                    <p>All the data we fetch with your API Key gets saved without refenrencing you. We don't even fetch your name to make sure that everything stays anonymous. Your survey will get an id, nothing more.</p>
                </div>
                <div class="col-sm text-center">
                    <div class="row justify-content-center">
                        <span class="fas fa-code" style="font-size: 5rem;"></span>
                    </div>
                    <h3 class="text-muted pt-2">Open Source</h3>
                    <p>This Project with all of its querys sent to the Code Learning platform is Open Source. You can easily see what we fetch and make sure that your data is handled with the upmost care.</p>
                </div>
            </div>
        </div>
    </div>


    <div style="position:relative;">
        <div class="px-5"
            style="color:#ddd;background-color:#282E34;text-align:center;padding:50px;text-align: justify;">
            <!-- Placeholder functionality-only UI -->

            <div id='welcome-div'>

                <form id='token-form' action='/token'>
                    <label>Paste your Code Token here:</label>
                    <div class="form-group">
                        <div class="input-group mb-2">

                            <input type='password' class="form-control form-control-lg" id='token-input'
                                aria-describedby="tokenHelp" placeholder="API Token" />
                            <div class="input-group-append">
                                <a class="btn btn-info iconbutton" type="button"
                                    href='https://app.code.berlin/settings?table=api' target='_blank'
                                    data-toggle="tooltip" data-placement="left" title="Get your token at C<>de">
                                    <i class="fas fa-external-link-alt"></i>
                                </a>
                            </div>
                        </div>
                        <small id="tokenHelp" class="form-text text-muted">
                            The token is valid for 10 Minutes only. We don't save your token. All data gathered gets
                            anonymized. </small>

                    </div>
                    <div class="form-group">
                        I would like to give you the following anonymous data:
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="assessments-checkbox"
                                aria-describedby="assessmentHelp" checked disabled>
                            <label class="form-check-label" for="assessments-checkbox">Assessments History</label>
                            <small id="assessmentHelp" class="form-text text-muted">
                                We will gather all your Past assessments including grades and comments made by the
                                professors. <a href="https://github.com/studyjourney/codedatasurvey" target="_blank"
                                    data-toggle="tooltip" data-placement="right" title="See the query"><i
                                        class="text-info far fa-question-circle"></i></a></small>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="current-semester-checkbox"
                                aria-describedby="currentSemesterHelp" checked>
                            <label class="form-check-label" for="current-semester-checkbox">Currently enrolled
                                modules</label>
                            <small id="currentSemesterHelp" class="form-text text-muted">
                                We will gather all your Past assessments including grades and comments made by the
                                professors. <a href="https://github.com/studyjourney/codedatasurvey" target="_blank"
                                    data-toggle="tooltip" data-placement="right" title="See the query"><i
                                        class="text-info far fa-question-circle"></i></a></small>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="events-checkbox"
                                aria-describedby="eventhistHelp" checked>
                            <label class="form-check-label" for="events-checkbox">Events history</label>
                            <small id="eventhistHelp" class="form-text text-muted">
                                We will gather all your Past assessments including grades and comments made by the
                                professors. <a href="https://github.com/studyjourney/codedatasurvey" target="_blank"
                                    data-toggle="tooltip" data-placement="right" title="See the query"><i
                                        class="text-info far fa-question-circle"></i></a></small>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="projects-checkbox"
                                aria-describedby="projectsHelp" checked>
                            <label class="form-check-label" for="projects-checkbox">Projects history</label>
                            <small id="projectsHelp" class="form-text text-muted">
                                We will gather all your Past assessments including grades and comments made by the
                                professors. <a href="https://github.com/studyjourney/codedatasurvey" target="_blank"
                                    data-toggle="tooltip" data-placement="right" title="See the query"><i
                                        class="text-info far fa-question-circle"></i></a></small>
                        </div>

                    </div>
                    <div class="form-group">

                        <input class="btn btn-primary btn-lg btn-block" type='submit' value='Submit' />
                    </div>

                </form>
            </div>
            <div id='sending-div' style='display:none'>
                <!-- Currently Processing the request-->
                <div class="text-center">
                    <div class="spinner-border m-5" style="width: 5rem; height: 5rem;" role="status">
                        <span class="sr-only">Loading...</span>
                    </div>
                </div>


            </div>
            <div id='success-div' style='display:none'>
                <!-- Survey Done -->
                <div class="text-center">
                    <i class="text-success far fa-check-circle" style="font-size: 5rem;"></i>
                </div>
            </div>
            <div id='error-div' style='display:none'>
                <!-- Survey error-->

                <div class="row d-flex justify-content-center">
                    <i class="text-danger far fa-times-circle" style="font-size: 5rem;"></i>
                </div>
                <div class="row d-flex justify-content-center">
                    <p>An error has occured</p>
                </div>
                <div class="row d-flex justify-content-center">
                    <button class="btn btn-primary mt-5" onClick="window.location.reload();">Try Again</button>
                </div>
            </div>

            <script type='text/javascript'>
                const welcomeDiv = document.getElementById('welcome-div')
                const sendingDiv = document.getElementById('sending-div')
                const successDiv = document.getElementById('success-div')
                const errorDiv = document.getElementById('error-div')
                document.getElementById('token-form').addEventListener('submit', e => {
                    e.preventDefault()
                    welcomeDiv.setAttribute('style', 'display:none')
                    sendingDiv.setAttribute('style', 'display:block')
                    fetch('/codeData', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            token: document.getElementById('token-input').value,
                            permissions: {
                                currentSemester: document.getElementById('current-semester-checkbox').checked,
                                events: document.getElementById('events-checkbox').checked,
                                projects: document.getElementById('projects-checkbox').checked,
                            }
                        }),
                    })
                        .then(res => {
                            if (res.status < 400) successDiv.setAttribute('style', 'display:block')
                            else errorDiv.setAttribute('style', 'display:block')
                        })
                        .catch(() => {
                            errorDiv.setAttribute('style', 'display:block')
                        })
                        .finally(() => {
                            sendingDiv.setAttribute('style', 'display:none')
                        })
                })

            </script>
        </div>
    </div>


    <div class="bgimg-1">
        <div class="caption">
            <span class="border">VERY COOL!</span>
        </div>
    </div>
    <!-- Footer -->
    <div style="color:#ddd;background-color:#282E34;text-align:center;padding:50px 80px;text-align: justify;">

        <p>Code Student Data Survey</p>
        <p>
            <a href="#">Study Journey Team</a> - Copyright 2020
        </p>
    </div>

    <script>
        $(document).ready(function () {
            $('[data-toggle="tooltip"]').tooltip();
        });
    </script>

</body>

</html>